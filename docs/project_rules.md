# Project Rules Document for Meme Coin Launch Platform on Sui Blockchain

## 1. Introduction

### 1.1 Purpose
This Project Rules Document establishes the guidelines, standards, and expectations for developers and AI Coding Agents working on the Meme Coin Launch Platform, a decentralized application (dApp) on the Sui blockchain. It ensures consistency, quality, and collaboration across the development process, covering code quality, workflows, security, testing, and communication. The document is designed to align all contributors with the project’s goals of delivering a secure, scalable, and user-friendly platform for creating, launching, and trading meme coins.

### 1.2 Scope
The document applies to all development activities for the Meme Coin Launch Platform’s Minimum Viable Product (MVP), including frontend, backend (optional), smart contracts, and indexer components. It covers rules for human developers and AI Coding Agents, addressing coding standards, version control, testing, security, documentation, and team collaboration. The platform leverages Sui’s high-performance blockchain and Move programming language, with features like bonding curve trading, automatic liquidity pool setup, and a creator dashboard.

### 1.3 Definitions, Acronyms, and Abbreviations
- **dApp**: Decentralized Application
- **Sui**: A Layer 1 blockchain using the Move programming language
- **DEX**: Decentralized Exchange (e.g., Cetus, Turbos)
- **Move**: A secure programming language for smart contracts
- **SUI**: Native token of the Sui blockchain
- **MVP**: Minimum Viable Product
- **CI/CD**: Continuous Integration/Continuous Deployment
- **PR**: Pull Request
- **A11y**: Accessibility
- **WCAG**: Web Content Accessibility Guidelines

### 1.4 References
- [Sui Blockchain Official Website](https://sui.io/)
- [Cetus Protocol Official Website](https://www.cetus.zone/)
- [Sui JavaScript SDK](https://github.com/MystenLabs/sui/tree/main/sdk)
- [React Documentation](https://react.dev/)
- [Tailwind CSS Documentation](https://tailwindcss.com/)

## 2. Project Overview

The Meme Coin Launch Platform is a web-based dApp that enables users to create, launch, and trade meme coins on the Sui blockchain. Inspired by Pump.fun, it uses Move smart contracts for core logic, a React.js frontend for user interactions, and an optional Node.js backend for indexing and APIs. Key features include token creation, bonding curve trading, automatic liquidity pool setup on Cetus DEX, a creator dashboard, trending/leaderboard sections, burn mechanics, and wallet integration. The project targets crypto enthusiasts, meme creators, developers, investors, and newcomers.

## 3. General Rules for Developers and AI Coding Agents

### 3.1 Code Ownership
- All code contributions are the property of the project and must be licensed under the project’s open-source license (e.g., MIT, specified in `LICENSE` file).
- Contributors must sign off on commits to confirm they have the right to contribute (e.g., using `git commit -s`).

### 3.2 Compliance
- Adhere to all applicable laws, regulations, and ethical standards, including those related to cryptocurrency and blockchain development.
- Ensure compliance with Sui blockchain’s terms and conditions.

### 3.3 Professional Conduct
- Maintain respectful and professional communication in all project-related channels (e.g., GitHub, Discord).
- Avoid introducing malicious code, backdoors, or vulnerabilities intentionally.

### 3.4 AI Coding Agents
- AI agents must follow the same coding standards, testing requirements, and review processes as human developers.
- AI-generated code must include a comment indicating its origin (e.g., `// Generated by AI Coding Agent`).
- AI agents must not modify existing code without explicit instructions and must provide a clear diff of changes.

## 4. Coding Standards

### 4.1 General Principles
- Write clean, readable, and maintainable code.
- Follow the DRY (Don’t Repeat Yourself) principle.
- Use meaningful variable/function names that reflect their purpose.
- Include comments for complex logic, but avoid redundant comments.

### 4.2 Language-Specific Standards

#### 4.2.1 TypeScript (Frontend and Backend)
- Use TypeScript for all JavaScript-based code (React.js, Node.js).
- Define interfaces for all complex data structures:
```typescript
interface Coin {
  id: string;
  name: string;
  symbol: string;
}
```
- Use strict mode (`"strict": true` in `tsconfig.json`).
- Avoid `any` types; use specific types or generics.

#### 4.2.2 Move (Smart Contracts)
- Follow Sui’s Move style guide ([Sui Move Documentation](https://docs.sui.io/)).
- Use descriptive struct and function names:
```move
module MemeCoin {
    struct Coin has key {
        id: UID,
        name: String,
        symbol: String,
    }

    public fun create_coin(name: String, symbol: String, ctx: &mut TxContext) {
        // Implementation
    }
}
```
- Include inline documentation for public functions.
- Avoid mutable global state unless necessary.

#### 4.2.3 CSS (Tailwind)
- Use Tailwind CSS utility classes for styling.
- Minimize custom CSS; place in `src/styles/global.css` if needed.
- Example:
```tsx
<div className="bg-gray-900 text-white p-6 rounded-lg">
  <h1 className="text-2xl font-bold">Create Coin</h1>
</div>
```

### 4.3 Naming Conventions
- **Files**: Use PascalCase for React components (e.g., `CoinCard.tsx`), camelCase for others (e.g., `coinController.ts`).
- **Components/Classes**: Use PascalCase (e.g., `CoinDetails`, `CoinService`).
- **Functions/Variables**: Use camelCase (e.g., `fetchCoinData`).
- **Constants**: Use UPPER_SNAKE_CASE (e.g., `MAX_IMAGE_SIZE`).

### 4.4 Linting and Formatting
- Use **ESLint** (v8.x) and **Prettier** (v2.x) for JavaScript/TypeScript.
- Configure ESLint in `.eslintrc.json`:
```json
{
  "extends": [
    "eslint:recommended",
    "plugin:react/recommended",
    "plugin:@typescript-eslint/recommended"
  ],
  "rules": { "react/prop-types": "off" }
}
```
- Run `npm run lint` before committing code.
- Use Move-specific linters (if available) for smart contracts.

## 5. Version Control

### 5.1 Git Workflow
- Use **Git** with **GitHub** for version control.
- Follow a GitFlow-inspired workflow:
  - `main`: Stable production branch.
  - `develop`: Integration branch for features.
  - `feature/*`: Feature branches (e.g., `feature/token-creation`).
  - `bugfix/*`: Bug fix branches.
- Create branches with descriptive names (e.g., `feature/add-burn-mechanics`).

### 5.2 Commit Messages
- Write clear, concise commit messages in the format:
  ```
  <type>(<scope>): <description>
  ```
  - Types: `feat`, `fix`, `docs`, `style`, `refactor`, `test`, `chore`.
  - Example: `feat(frontend): add coin creation form`.
- Include issue numbers if applicable (e.g., `fix(indexer): resolve event lag #123`).

### 5.3 Pull Requests (PRs)
- Create PRs from feature/bugfix branches to `develop`.
- Include a description of changes, referencing related issues.
- Assign at least two reviewers for code review.
- Ensure all CI checks (linting, tests) pass before merging.
- Use squash merging to maintain a clean commit history.

## 6. Development Workflow

### 6.1 Setup
1. Clone repository: `git clone <repo-url>`
2. Install dependencies:
   - Frontend: `cd frontend && npm install`
   - Backend: `cd backend && npm install`
   - Smart Contracts: Install Sui CLI (`cargo install --locked --git https://github.com/MystenLabs/sui.git sui`).
3. Configure environment variables in `.env`:
```env
VITE_SUI_RPC_URL=https://fullnode.mainnet.sui.io
SUI_RPC_URL=https://fullnode.mainnet.sui.io
CETUS_API_KEY=your_cetus_api_key
DATABASE_URL=postgres://user:password@host:port/dbname
```

### 6.2 Development
- **Frontend**: Run `npm run dev` with Vite for hot reloading.
- **Backend/Indexer**: Run `npm run start` for Node.js server.
- **Smart Contracts**: Write Move code, test with `sui move test`, deploy with `sui client publish`.
- Use **Visual Studio Code** with extensions for TypeScript, Move, and ESLint.

### 6.3 AI Coding Agents
- AI agents must generate code within the specified file structure and adhere to naming conventions.
- Provide a summary of changes in PR descriptions (e.g., “AI-generated code for token creation form”).
- Avoid overwriting existing code unless explicitly instructed.

## 7. Testing Requirements

### 7.1 Unit Testing
- Write unit tests for all critical components:
  - Frontend: Use **Jest** and **React Testing Library**.
  - Backend: Use **Jest** for controllers and services.
  - Smart Contracts: Use Sui Move Testing Framework.
- Example (Frontend):
```tsx
import { render, screen } from '@testing-library/react';
import CoinCard from './CoinCard';

test('renders coin card', () => {
  render(<CoinCard name="DogeMoon" symbol="DOGM" marketCap={1000000} />);
  expect(screen.getByText(/DogeMoon/)).toBeInTheDocument();
});
```
- Achieve at least 80% test coverage.

### 7.2 Integration Testing
- Test end-to-end flows (e.g., token creation, trading) with **Cypress** (frontend) and **Supertest** (backend).
- Example (Backend):
```typescript
import request from 'supertest';
import app from '../app';

test('GET /api/coins returns 200', async () => {
  const response = await request(app).get('/api/coins');
  expect(response.status).toBe(200);
});
```

### 7.3 Security Testing
- Conduct smart contract audits using tools like Move Prover or third-party auditors.
- Test frontend for XSS, CSRF, and injection vulnerabilities with tools like **Lighthouse** and **axe**.
- Test backend APIs for SQL injection and authentication issues.

### 7.4 Performance Testing
- Use **k6** to simulate 1,000 concurrent users:
```javascript
import http from 'k6/http';

export default function () {
  http.get('https://backend.example.com/api/coins');
}
```
- Ensure transaction confirmations are sub-second and API responses are under 200ms.

### 7.5 Manual Testing
- Validate responsiveness across devices (desktop, tablet, mobile).
- Test wallet integrations with Sui Wallet and Martian.
- Verify accessibility compliance (WCAG 2.1 Level AA).

## 8. Security Guidelines

### 8.1 Smart Contracts
- Audit contracts for reentrancy, overflow, and access control issues.
- Use Move’s type safety to prevent common vulnerabilities.
- Restrict sensitive functions (e.g., metadata updates) to authorized addresses.

### 8.2 Frontend
- Prevent XSS by sanitizing inputs and using React’s built-in protections.
- Use secure headers (e.g., Content-Security-Policy) via Vercel configuration.
- Validate wallet interactions with Sui Wallet Adapter.

### 8.3 Backend
- Implement rate limiting with `express-rate-limit`.
- Use HTTPS for all APIs.
- Encrypt sensitive environment variables with tools like AWS Secrets Manager.

### 8.4 Data Privacy
- Store minimal user data; rely on blockchain for transaction records.
- Avoid logging sensitive information (e.g., wallet private keys).

## 9. Documentation Requirements

### 9.1 Code Documentation
- Use JSDoc for TypeScript functions:
```typescript
/** Fetches coin data from indexer */
const fetchCoinData = async (): Promise<Coin[]> => {
  // Implementation
};
```
- Use Move comments for smart contracts:
```move
/// Creates a new meme coin
public fun create_coin(name: String, symbol: String, ctx: &mut TxContext) {
    // Implementation
}
```

### 9.2 Project Documentation
- Maintain a `README.md` with setup, development, and deployment instructions.
- Document APIs in `docs/api.md` using OpenAPI format.
- Update architecture diagrams in `docs/architecture` using tools like Draw.io.

### 9.3 AI Coding Agents
- AI agents must include comments explaining generated code’s purpose.
- Provide a changelog for AI-generated contributions in PRs.

## 10. Collaboration and Communication

### 10.1 Team Communication
- Use **Discord** for real-time discussions and updates.
- Use **GitHub Issues** for task tracking and bug reporting.
- Hold weekly stand-up meetings to review progress.

### 10.2 Code Review
- Require at least two approvals for PRs.
- Reviewers must check for:
  - Adherence to coding standards.
  - Test coverage.
  - Security considerations.
  - Documentation updates.
- Provide constructive feedback within 24 hours of PR submission.

### 10.3 Issue Management
- Create issues with clear titles, descriptions, and labels (e.g., `bug`, `feature`, `enhancement`).
- Assign issues to contributors based on expertise and availability.
- Close issues only after verification in `develop` or `main`.

## 11. Deployment and Maintenance

### 11.1 Deployment
- **Frontend**: Deploy to Vercel via GitHub Actions.
- **Backend/Indexer**: Deploy to AWS EC2 or Google Cloud Compute Engine.
- **Smart Contracts**: Deploy to Sui testnet for testing, then mainnet via Sui CLI.
- Example GitHub Actions workflow:
```yaml
name: Deploy Frontend
on: [push]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: npm install
      - run: npm run build
      - uses: vercel/action@v1
        with:
          token: ${{ secrets.VERCEL_TOKEN }}
```

### 11.2 Monitoring
- Use **Prometheus** and **Grafana** for metrics (e.g., API response times, indexer lag).
- Set up alerts for downtime or high error rates.
- Log errors with **Winston** to `logs/app.log`.

### 11.3 Maintenance
- Update dependencies monthly via `npm update`.
- Monitor Sui SDK and Cetus API releases for compatibility.
- Back up PostgreSQL database weekly.

## 12. AI Coding Agent-Specific Rules

### 12.1 Code Generation
- Generate code only for assigned tasks or issues.
- Ensure generated code matches the project’s tech stack (React.js, TypeScript, Move, Node.js).
- Include tests for all generated code.

### 12.2 Code Review
- AI-generated PRs must be reviewed by human developers.
- AI agents must respond to review comments with clarifications or updates within 12 hours.

### 12.3 Error Handling
- AI agents must implement robust error handling in generated code:
```typescript
const fetchCoinData = async () => {
  try {
    const response = await axios.get('/api/coins');
    return response.data;
  } catch (error) {
    console.error('Error fetching coins:', error);
    throw new Error('Failed to fetch coins');
  }
};
```

### 12.4 Documentation
- AI agents must document generated code with JSDoc or Move comments.
- Include a summary of AI contributions in PR descriptions.

## 13. Assumptions and Constraints

### 13.1 Assumptions
- Developers have experience with TypeScript, React.js, and Node.js.
- AI agents are configured to integrate with GitHub and follow coding standards.
- Sui blockchain and Cetus DEX APIs remain stable.

### 13.2 Constraints
- Smart contracts must use Move and Sui’s object-centric model.
- Frontend must integrate with Sui Wallet Adapter.
- Backend APIs must support 1,000 concurrent users.

## 14. Consequences of Non-Compliance

- **Code Quality**: Non-compliant code will be rejected during PR reviews.
- **Security Violations**: Introduction of vulnerabilities may result in removal from the project.
- **Missed Deadlines**: Repeated failure to meet deadlines may lead to reassignment of tasks.
- **AI Agents**: Non-compliant AI contributions will be reverted, and agents may be restricted from further contributions.

## 15. Appendix

### 15.1 Sample Commit Message
```
feat(frontend): implement coin creation form

- Added CreateCoinForm component
- Integrated with Sui Wallet Adapter
- Added unit tests
Closes #123
```

### 15.2 Sample PR Description
```
**Title**: Add Token Creation Form

**Description**:
This PR adds the token creation form to the frontend, allowing users to input coin details and deploy a smart contract. Includes validation, wallet integration, and tests.

**Changes**:
- Created `CreateCoinForm.tsx` with Tailwind styling
- Added `useWallet` hook for Sui Wallet Adapter
- Wrote Jest tests for form validation
- Updated API integration with Sui JavaScript SDK

**Issue**: #123
```

### 15.3 Sample Environment Setup
- Install Node.js: `nvm install 18`
- Install Sui CLI: `cargo install --locked --git https://github.com/MystenLabs/sui.git sui`
- Configure `.env`:
```env
VITE_SUI_RPC_URL=https://fullnode.mainnet.sui.io
DATABASE_URL=postgres://user:password@host:port/dbname
```