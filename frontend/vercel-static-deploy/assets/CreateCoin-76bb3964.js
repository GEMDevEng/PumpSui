import{c as k,b as D,r as t,j as e,d as f,C as E,B as j,e as F}from"./index-c94dabce.js";const L=()=>{const i=k(),{connected:r,address:d,balance:o}=D();t.useEffect(()=>{if(!r){const s=setTimeout(()=>{i("/wallet")},1e3);return()=>clearTimeout(s)}},[r,i]);const[l,N]=t.useState(""),[n,v]=t.useState(""),[u,w]=t.useState(""),[c,S]=t.useState("1000000"),[x,C]=t.useState(""),[h,p]=t.useState(!1),[g,a]=t.useState(null),[y,b]=t.useState(null),U=async s=>{if(s.preventDefault(),!r){a("Please connect your wallet first");return}if(!l||!n){a("Name and symbol are required");return}if(l.length>50){a("Name must be less than 50 characters");return}if(n.length>10){a("Symbol must be less than 10 characters");return}if(c==="0"||!c){a("Initial supply must be greater than 0");return}try{p(!0),a(null),b(null);const I=await F({name:l,symbol:n,description:u,initialSupply:c,imageUrl:x||void 0});b(`Successfully created ${l} (${n})! Redirecting to coin page...`),setTimeout(()=>{i(`/coins/${I.id}`)},2e3)}catch(m){console.error("Error creating coin:",m),a(m.message||"Failed to create coin")}finally{p(!1)}};return e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Create Meme Coin"}),r&&d&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Wallet Connected"}),e.jsx("p",{className:"text-sm text-gray-500",children:d})]}),e.jsxs("div",{className:"mt-2 sm:mt-0",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Balance: "}),e.jsxs("span",{className:"font-medium",children:[f(o||"0")," SUI"]})]})]})}),e.jsx(E,{children:r?e.jsxs("form",{onSubmit:U,className:"space-y-6",children:[g&&e.jsx("div",{className:"bg-red-50 text-red-700 p-4 rounded-md",children:g}),y&&e.jsx("div",{className:"bg-green-50 text-green-700 p-4 rounded-md",children:y}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Coin Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"name",value:l,onChange:s=>N(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g. Doge Coin",maxLength:50,required:!0}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Max 50 characters"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"symbol",className:"block text-sm font-medium text-gray-700 mb-1",children:["Symbol ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"symbol",value:n,onChange:s=>v(s.target.value.toUpperCase()),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g. DOGE",maxLength:10,required:!0}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Max 10 characters, uppercase letters"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{id:"description",value:u,onChange:s=>w(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Describe your meme coin",rows:3,maxLength:500}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Max 500 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:"Image URL (Optional)"}),e.jsx("input",{type:"url",id:"imageUrl",value:x,onChange:s=>C(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"https://example.com/image.png"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"URL to your coin's logo image (recommended size: 256x256px)"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"initialSupply",className:"block text-sm font-medium text-gray-700 mb-1",children:["Initial Supply ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",id:"initialSupply",value:c,onChange:s=>S(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",min:"1",required:!0}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"The total number of tokens that will be created initially"})]}),e.jsx("div",{className:"pt-4",children:e.jsx(j,{type:"submit",fullWidth:!0,disabled:h,children:h?"Creating...":"Create Meme Coin"})}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Transaction Details"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Estimated Gas Fee:"}),e.jsx("span",{className:"font-medium",children:"~0.001 SUI"})]}),e.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"Your Balance:"}),e.jsxs("span",{className:"font-medium",children:[f(o||"0")," SUI"]})]}),Number(o||0)<1e6&&e.jsx("div",{className:"mt-2 text-xs text-amber-600",children:e.jsx("p",{children:"Your balance may be too low to cover the transaction fee. Consider adding more SUI to your wallet."})})]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("p",{className:"mb-4 text-gray-600",children:"Connect your wallet to create a meme coin"}),e.jsx(j,{onClick:()=>i("/wallet"),children:"Connect Wallet"})]})})]})};export{L as default};
